<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Customer Reviews — Scented</title>
    <link rel="stylesheet" href="styles.css" />
    <style>
      .reviews-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      .reviews-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 30px;
      }

      .review-card {
        background: #fff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .stars {
        color: #ffd700;
        font-size: 24px;
        margin-bottom: 10px;
      }

      .review-image {
        width: 100%;
        max-height: 200px;
        object-fit: cover;
        border-radius: 8px;
        margin: 10px 0;
      }

      .review-text {
        font-style: italic;
        margin: 10px 0;
        color: #444;
      }

      .reviewer {
        font-weight: 500;
        color: #333;
        margin: 5px 0;
      }

      .review-date {
        color: #666;
        font-size: 0.9em;
      }

      .no-reviews {
        text-align: center;
        padding: 40px;
        color: #666;
      }

      .leave-review-btn {
        display: block;
        width: fit-content;
        margin: 20px auto;
        padding: 12px 24px;
        background: #ff6f61;
        color: white;
        border: none;
        border-radius: 6px;
        font-size: 1rem;
        cursor: pointer;
        text-decoration: none;
      }

      .leave-review-btn:hover {
        background: #e65c50;
      }

      @media (max-width: 768px) {
        .reviews-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <h1>Customer Reviews</h1>

    <div class="reviews-container">
      <a href="index.html#openReviewForm" class="leave-review-btn"
        >Leave a Review</a
      >

      <div id="allReviews" class="reviews-grid">
        <!-- Reviews will be loaded here dynamically -->
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const reviewsContainer = document.getElementById("allReviews");

        function displayAllReviews() {
          // Get reviews from localStorage
          const reviews = JSON.parse(
            localStorage.getItem("customerReviews") || "[]"
          );

          if (reviews.length === 0) {
            reviewsContainer.innerHTML = `
                        <div class="no-reviews">
                            <h3>No reviews yet</h3>
                            <p>Be the first to share your experience!</p>
                        </div>
                    `;
            return;
          }

          // Sort reviews by date (newest first)
          reviews.sort((a, b) => new Date(b.date) - new Date(a.date));

          // Display all reviews
          reviewsContainer.innerHTML = reviews
            .map(
              (review) => `
                    <div class="review-card">
                        <div class="stars">${"★".repeat(
                          review.rating
                        )}${"☆".repeat(5 - review.rating)}</div>
                        ${
                          review.image
                            ? `<img src="${review.image}" class="review-image" alt="Review photo">`
                            : ""
                        }
                        <p class="review-text">"${review.text}"</p>
                        <p class="reviewer">- ${review.name}</p>
                        <small class="review-date">${new Date(
                          review.date
                        ).toLocaleDateString()}</small>
                    </div>
                `
            )
            .join("");
        }

        // Display reviews immediately
        displayAllReviews();

        // Update when storage changes (new review added)
        window.addEventListener("storage", function (e) {
          if (e.key === "customerReviews") {
            displayAllReviews();
          }
        });
      });
    </script>

    <!-- Footer navigation -->
    <footer class="site-footer">
      <nav class="bottom-nav">
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="contact.html">Contact</a></li>
          <li><a href="perfumes-for-her.html">Perfumes for Her</a></li>
          <li><a href="perfumes-for-him.html">Perfumes for Him</a></li>
          <li><a href="cart.html">Cart</a></li>
        </ul>
      </nav>
    </footer>
  </body>
</html>
